script-dir: /etc/nodepool/scripts
dburi: 'mysql+pymysql://<%= @settings['nodepool_mysql_db'] %>:<%= @settings['nodepool_mysql_secret'] %>@<%= @settings['nodepool_mysql_address'] %>/<%= @settings['nodepool_mysql_username'] %>'

zmq-publishers:
 - tcp://<%= @settings["jenkins_host"] %>:8888

gearman-servers:
 - host: 127.0.0.1

cron:
  image-update: '14 2 * * *'
  cleanup: '27 */6 * * *'
  check: '*/15 * * * *'

targets:
  - name: jenkins
    jenkins:
      url: '<%= @settings["jenkins_url"] %>'
      user: 'jenkins'
      apikey: '<%= @settings["jenkins_password"] %>'
      credentials-id: '4f98191e-efbb-4ac4-8131-0e4a8bb2ce14'

providers:
 - name: default
   username: '<%= scope.function_hiera(['nodepool'])["nodepool_os_username"] %>'
   password: '<%= scope.function_hiera(['nodepool'])["nodepool_os_password"] %>'
   project-id: '<%= scope.function_hiera(['nodepool'])["nodepool_os_project_id"] %>'
   auth-url: '<%= scope.function_hiera(['nodepool'])["nodepool_os_auth_url"] %>'
   pool: '<%= scope.function_hiera(['nodepool'])["nodepool_os_pool"] %>'
   max-servers: <%= scope.function_hiera(['nodepool'])["nodepool_os_pool_max_amount"] %>
   rate: <%= scope.function_hiera(['nodepool'])["nodepool_provider_rate"] %>
